{"version":3,"sources":["registerServiceWorker.ts","components/styled.ts","components/QuestionItem.tsx","helpers.ts","components/Progress.tsx","Storage.ts","App.tsx","index.tsx"],"names":["isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","catch","error","colors","icons","check","cross","Shell","styled","div","AppContainer","Header","header","Card","SummaryCard","props","color","Question","QuestionText","Image","img","round","ImageWrapper","Option","isAnswered","isSelected","isCorrect","Hint","Pill","span","Footer","footer","NextButton","button","QuestionItem","useState","showRoundImage","setShowRoundImage","handleToggleRoundImage","useCallback","prev","handleSelection","option","selected","onSelect","correctAnswer","index","question","onClick","alt","src","image","uri","Object","keys","answers","map","key","pillContent","style","roadCodePage","shuffle","array","temporaryValue","randomIndex","currentIndex","length","Math","floor","random","ProgressContainer","ProgressBar","ratio","ProgressText","Progress","answeredCount","incorrectCount","correctCount","getSampleRatio","questionsCount","n","progressRatio","incorrectRatio","correctRatio","ratios","x","LS_KEY","value","path","localStorage","setItem","JSON","stringify","defaultValue","getItem","parse","INITIAL_STATE","isDone","questions","questionsAmount","status","selectedOption","rootElement","document","getElementById","app","defaultState","slice","Storage","setState","useEffect","actions","onNextQuestionClick","onResetState","onOptionSelection","isFailed","makeActionHandlers","selectedItem","render","URL","process","toString","origin","addEventListener","fetch","response","headers","get","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.e787382e.chunk.js","sourcesContent":["// tslint:disable:no-console\r\n// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the 'N+1' visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL!,\r\n      window.location.toString()\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            \"This web app is being served cache-first by a service \" +\r\n              \"worker. To learn more, visit https://goo.gl/SC7cgQ\"\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker) {\r\n          installingWorker.onstatechange = () => {\r\n            if (installingWorker.state === \"installed\") {\r\n              if (navigator.serviceWorker.controller) {\r\n                // At this point, the old content will have been purged and\r\n                // the fresh content will have been added to the cache.\r\n                // It's the perfect time to display a 'New content is\r\n                // available; please refresh.' message in your web app.\r\n                console.log(\"New content is available; please refresh.\");\r\n              } else {\r\n                // At this point, everything has been precached.\r\n                // It's the perfect time to display a\r\n                // 'Content is cached for offline use.' message.\r\n                console.log(\"Content is cached for offline use.\");\r\n              }\r\n            }\r\n          };\r\n        }\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get(\"content-type\")!.indexOf(\"javascript\") === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready.then((registration) => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import styled from \"styled-components\";\n\nexport const colors = {\n  primary: \"#ffd400\",\n  secondary: \"#3482b9\",\n  positive: \"#49c04a\",\n  negative: \"#d03930\",\n  neutral: \"#aaa\",\n  muted: \"#eaeaea\",\n  hotpink: \"#FC8BA4\",\n  black: \"#333\",\n  white: \"#fff\",\n  gray: \"#ccc\",\n  // alternative pallette\n  lightbrown: \"#AD5114\",\n  darkbrown: \"#663210\",\n  asphaltgrey: \"#415E6D\",\n  lightgrey: \"#A0AEB6\",\n  lightgreen: \"#75B600\",\n  olivegreen: \"#46600E\"\n};\n\nexport const icons = {\n  check: `${\n    colors.positive\n    // tslint:disable-next-line:max-line-length\n  } 50% no-repeat url(data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjIwLjM0OXB4IiBoZWlnaHQ9IjE1LjgyNnB4IiB2aWV3Qm94PSIwIDAgMjAuMzQ5IDE1LjgyNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAuMzQ5IDE1LjgyNiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+IDxwb2x5Z29uIGZpbGw9IiNmZmZmZmYiIHBvaW50cz0iMTguMjI4LDAgMjAuMzQ5LDIuMTIyIDYuNjQ0LDE1LjgyNiAwLDkuMTgyIDIuMTIyLDcuMDYxIDYuNjQ0LDExLjU4MyAiLz4gPC9zdmc+)`,\n  // tslint:disable-next-line:max-line-length\n  cross: `white 50% no-repeat  url(data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjE1Ljg3M3B4IiBoZWlnaHQ9IjE1Ljg5MXB4IiB2aWV3Qm94PSIwIDAgMTUuODczIDE1Ljg5MSIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTUuODczIDE1Ljg5MSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+IDxwb2x5Z29uIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBmaWxsPSIjZGE0MTIxIiBwb2ludHM9IjE0LjE4NiwwIDE1Ljg3MywxLjc0IDkuNjg2LDcuOTYzIDE1LjgzOCwxNC4xNSAxNC4xNSwxNS44OTEgNy45MjgsOS43MjEgMS44MTEsMTUuODkxIDAuMDM1LDE0LjE1IDYuMTg4LDcuOTYzIDAsMS43NzUgMS43NTgsMCA3Ljk2Myw2LjI0ICIvPiA8L3N2Zz4=)`\n};\n\nexport const Shell = styled.div`\n  display: flex;\n  background-color: #dedede;\n  font-family: Roboto, sans-serif;\n  color: ${colors.black};\n  min-height: 100vh;\n`;\n\nexport const AppContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin: 0 auto;\n  padding-top: 40px;\n  max-width: 400px;\n  flex-grow: 1;\n`;\n\nexport const Header = styled.header`\n  font-size: 2em;\n  text-align: center;\n  color: ${colors.secondary};\n  font-weight: bold;\n`;\n\nexport const Card = styled.div`\n  display: flex;\n  flex-direction: column;\n  min-height: 10vh;\n  margin: 1em 0;\n  padding: 0.3em;\n  border-radius: 0.2em;\n  background-color: white;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);\n  @media screen and (max-width: 600px) {\n    margin: 1em 0.4em;\n  }\n`;\n\nexport const SummaryCard = styled(Card)`\n  justify-content: center;\n  align-items: center;\n  min-height: 10vh;\n  font-weight: bold;\n  color: ${colors.white};\n  font-size: 1.2em;\n  background-color: ${props => props.color};\n`;\n\nexport const Question = styled.div`\n  font-size: 1.2em;\n  font-weight: bold;\n  background: ${colors.primary};\n  padding: 0.3em;\n  border-radius: 0.2em;\n  display: flex;\n  justify-content: space-between;\n  color: #333;\n  margin-bottom: 0.2em;\n`;\n\nexport const QuestionText = styled.div`\n  margin: 0.2em;\n  margin-right: 0.1em;\n`;\n\nexport const Image = styled.img<{ round?: boolean }>`\n  width: 8em;\n  height: 8em;\n  overflow: hidden;\n  border-radius: ${props => (props.round ? \"50%\" : \"0.1em\")};\n  border: solid 0.2em white;\n  transition: border-radius 0.2s linear;\n`;\n\nexport const ImageWrapper = styled.div``;\n\ninterface OptionProps {\n  isSelected: boolean;\n  isAnswered: boolean;\n  isCorrect: boolean;\n}\n\nconst getOptionDisplay = (props: OptionProps) =>\n  props.isAnswered\n    ? props.isSelected || props.isCorrect\n      ? \"flex\"\n      : \"none\"\n    : \"flex\";\n\nconst getOptionBackgroundColor = (props: OptionProps) =>\n  props.isAnswered && props.isSelected\n    ? props.isCorrect\n      ? colors.positive\n      : colors.negative\n    : colors.muted;\n\nexport const Option = styled.div<OptionProps>`\n  display: ${getOptionDisplay};\n  padding: 0.6em 0.2em;\n  margin: 0.2em 0;\n  align-items: center;\n  border-radius: 0.2em;\n  cursor: ${props => (props.isAnswered ? \"\" : \"pointer\")};\n  background-color: ${getOptionBackgroundColor};\n  color: ${props =>\n    props.isAnswered && props.isSelected ? colors.white : colors.black};\n  :hover {\n    background-color: ${props => (props.isAnswered ? \"\" : colors.gray)};\n  }\n  transition: background-color 0.3s;\n`;\n\nexport const Hint = styled.div`\n  color: #666;\n  padding: 0.2em;\n`;\n\ninterface PillProps {\n  isSelected: boolean;\n  isAnswered: boolean;\n  isCorrect: boolean;\n}\n\nconst getPillBackground = (props: PillProps) =>\n  props.isAnswered && (props.isSelected || props.isCorrect)\n    ? props.isCorrect\n      ? icons.check\n      : icons.cross\n    : colors.primary;\n\nconst getPillBorder = (props: PillProps) =>\n  props.isAnswered && (props.isSelected || props.isCorrect)\n    ? props.isCorrect\n      ? `solid 0.1em ${colors.white}`\n      : `none`\n    : `solid 0.1em ${colors.black}`;\n\nexport const Pill = styled.span<PillProps>`\n  border-radius: 50%;\n  min-width: 1.4em;\n  min-height: 1.4em;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-right: 0.4em;\n  margin-left: 0.1em;\n  font-weight: bold;\n  padding: 0.2em;\n  background: ${getPillBackground};\n  border: ${getPillBorder};\n`;\n\nexport const Footer = styled.footer`\n  display: flex;\n  justify-self: flex-end;\n  align-self: flex-end;\n  width: 100%;\n  @media screen and (max-width: 600px) {\n    flex: 1;\n  }\n`;\n\nexport const NextButton = styled.button`\n  background-color: ${colors.secondary};\n  font-size: 1.8em;\n  color: white;\n  border: none;\n  border-radius: 0.1em;\n  padding: 0.3em 0.6em;\n  flex: 1;\n  @media screen and (max-width: 600px) {\n    align-self: flex-end;\n    border-radius: 0;\n  }\n`;\n","import React, { useCallback, useState } from \"react\";\n\nimport {\n  Card,\n  colors,\n  Hint,\n  Image,\n  ImageWrapper,\n  Option,\n  Pill,\n  Question,\n  QuestionText\n} from \"./styled\";\n\nimport { IQuestion } from \"../types\";\n\ninterface Props extends IQuestion {\n  index: number;\n  selected: string | null;\n  onSelect(selectedOption: string, isCorrect: boolean): void;\n}\n\nexport default function QuestionItem(props: Props) {\n  const [showRoundImage, setShowRoundImage] = useState(true);\n\n  const handleToggleRoundImage = useCallback(\n    () => setShowRoundImage(prev => !prev),\n    []\n  );\n\n  const handleSelection = useCallback(\n    (option: string) => () => {\n      if (!!props.selected) {\n        return;\n      }\n\n      props.onSelect(option, option === props.correctAnswer);\n    },\n    [props]\n  );\n\n  const pillContent = (key: string) =>\n    !!props.selected && (key === props.selected || key === props.correctAnswer)\n      ? \"\"\n      : key;\n\n  return (\n    <Card>\n      <Question>\n        <QuestionText>\n          #{props.index}: {props.question}\n        </QuestionText>\n        <ImageWrapper onClick={handleToggleRoundImage}>\n          <Image\n            round={showRoundImage}\n            alt=\"question's image\"\n            src={props.image.uri}\n          />\n        </ImageWrapper>\n      </Question>\n      {Object.keys(props.answers).map((key: string) => (\n        <Option\n          key={key}\n          onClick={handleSelection(key)}\n          isAnswered={!!props.selected}\n          isCorrect={key === props.correctAnswer}\n          isSelected={key === props.selected}\n        >\n          <Pill\n            isAnswered={!!props.selected}\n            isCorrect={key === props.correctAnswer}\n            isSelected={key === props.selected}\n          >\n            {pillContent(key)}\n          </Pill>\n          <div>{props.answers[key]}</div>\n        </Option>\n      ))}\n      {!!props.selected && (\n        <Hint>\n          {props.selected !== props.correctAnswer && (\n            <p style={{ color: colors.negative }}>\n              Correct Answer: {props.correctAnswer}\n            </p>\n          )}\n          {// tslint:disable-next-line: max-line-length\n          `For more information about this question refer to page ${props.roadCodePage} of the Official New Zealand Road Code.`}\n        </Hint>\n      )}\n    </Card>\n  );\n}\n","export function shuffle<T>(array: T[]) {\r\n  let currentIndex = array.length;\r\n  let temporaryValue;\r\n  let randomIndex;\r\n\r\n  // While there remain elements to shuffle...\r\n  while (0 !== currentIndex) {\r\n    // Pick a remaining element...\r\n    randomIndex = Math.floor(Math.random() * currentIndex);\r\n    currentIndex -= 1;\r\n\r\n    // And swap it with the current element.\r\n    temporaryValue = array[currentIndex];\r\n    array[currentIndex] = array[randomIndex];\r\n    array[randomIndex] = temporaryValue;\r\n  }\r\n\r\n  return array;\r\n}\r\n\r\nexport const ratio = (length: number) => (n: number) => (n / length) * 100;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nimport { ratio } from \"../helpers\";\r\nimport { colors } from \"./styled\";\r\n\r\nconst ProgressContainer = styled.div`\r\n  display: flex;\r\n  position: fixed;\r\n  top: 0;\r\n  background-color: ${colors.neutral};\r\n  height: 1.8em;\r\n  width: 100%;\r\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);\r\n`;\r\nexport interface ProgressBarProps {\r\n  ratio: number;\r\n  color: string;\r\n}\r\n\r\nconst ProgressBar = styled.div<ProgressBarProps>`\r\n  height: 1.8em;\r\n  background-color: ${props => props.color};\r\n  width: ${props => props.ratio}%;\r\n  transition: 0.3s;\r\n`;\r\n\r\nconst ProgressText = styled.div`\r\n  font-size: 1em;\r\n  font-weight: bold;\r\n  text-align: right;\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0.1em;\r\n  height: 1.8em;\r\n  color: white;\r\n  padding: 0.3em 0.4em;\r\n`;\r\n\r\ninterface Props {\r\n  questionsCount: number;\r\n  correctCount: number;\r\n  incorrectCount: number;\r\n}\r\n\r\nexport default function Progress(props: Props) {\r\n  const answeredCount = props.incorrectCount + props.correctCount;\r\n\r\n  const getSampleRatio = ratio(props.questionsCount);\r\n  const progressRatio = getSampleRatio(answeredCount);\r\n  const incorrectRatio = getSampleRatio(props.incorrectCount);\r\n  const correctRatio = getSampleRatio(props.correctCount);\r\n\r\n  const ratios = [\r\n    {\r\n      ratio: incorrectRatio,\r\n      color: colors.negative\r\n    },\r\n    {\r\n      ratio: correctRatio,\r\n      color: colors.positive\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <ProgressContainer>\r\n      {ratios.map(x => (\r\n        <ProgressBar key={x.color} ratio={x.ratio} color={x.color} />\r\n      ))}\r\n      <ProgressText>\r\n        {answeredCount} of {props.questionsCount} ({Math.round(progressRatio)}\r\n        %)\r\n        {!!props.incorrectCount &&\r\n          ` / ${props.incorrectCount} wrong answer${\r\n            props.incorrectCount > 1 ? \"s\" : \"\"\r\n          }`}\r\n      </ProgressText>\r\n    </ProgressContainer>\r\n  );\r\n}\r\n","const LS_KEY = \"@THE_ROAD_QUIZ\";\r\n\r\nexport default {\r\n  persist<T extends {}>(value: T, path: string = \"\") {\r\n    const key = `${LS_KEY}${path}`;\r\n\r\n    localStorage.setItem(key, JSON.stringify(value));\r\n  },\r\n\r\n  read<T>(defaultValue: T, path: string = \"\"): T {\r\n    const key = `${LS_KEY}${path}`;\r\n    const value = localStorage.getItem(key);\r\n\r\n    return value !== null ? JSON.parse(value) : defaultValue;\r\n  }\r\n};\r\n","import React, { Dispatch, SetStateAction, useEffect, useState } from \"react\";\n\nimport { IQuestionItem } from \"./types\";\n\nimport {\n  AppContainer,\n  colors,\n  Footer,\n  Header,\n  NextButton,\n  Progress,\n  QuestionItem,\n  Shell,\n  SummaryCard\n} from \"./components\";\n\nimport { shuffle } from \"./helpers\";\nimport Storage from \"./Storage\";\nimport \"./styles.css\";\n\ntype Status = \"IN_PROGRESS\" | \"PASSED\" | \"FAILED\";\n\ninterface State {\n  answeredCount: number;\n  correctCount: number;\n  incorrectCount: number;\n  isDone: boolean;\n  index: number;\n  isAnswered: boolean;\n  questions: IQuestionItem[];\n  questionsAmount: number;\n  status: Status;\n  selectedOption: string | null;\n}\n\nconst INITIAL_STATE: State = {\n  answeredCount: 0,\n  correctCount: 0,\n  incorrectCount: 0,\n  isDone: false,\n  index: 0,\n  isAnswered: false,\n  questions: [],\n  questionsAmount: 35,\n  status: \"IN_PROGRESS\",\n  selectedOption: null\n};\n\ninterface Props {\n  questions: IQuestionItem[];\n}\n\nconst makeActionHandlers = (\n  setState: Dispatch<SetStateAction<State>>,\n  questions: IQuestionItem[]\n) => ({\n  onNextQuestionClick() {\n    setState((state: State) =>\n      state.index < state.questionsAmount - 1\n        ? {\n            ...state,\n            index: state.index + 1,\n            isAnswered: false,\n            selectedOption: null\n          }\n        : state\n    );\n  },\n  onResetState() {\n    setState((state: State) => ({\n      ...INITIAL_STATE,\n      questionsAmount: state.questionsAmount,\n      questions: shuffle(questions).slice(0, state.questionsAmount)\n    }));\n  },\n  onOptionSelection(selectedOption: string, isCorrect: boolean) {\n    setState((state: State) => {\n      const isDone = state.index === state.questionsAmount - 1;\n      const incorrectCount = !isCorrect\n        ? state.incorrectCount + 1\n        : state.incorrectCount;\n      const correctCount = isCorrect\n        ? state.correctCount + 1\n        : state.correctCount;\n      const isFailed = incorrectCount > 3;\n\n      return {\n        ...state,\n        selectedOption,\n        answeredCount: state.answeredCount + 1,\n        correctCount,\n        incorrectCount,\n        isDone: isDone || isFailed,\n        isAnswered: true,\n        status: isFailed ? \"FAILED\" : isDone ? \"PASSED\" : \"IN_PROGRESS\"\n      };\n    });\n  }\n});\n\nexport default function App(props: Props) {\n  const defaultState = {\n    ...INITIAL_STATE,\n    questions: props.questions.slice(0, INITIAL_STATE.questionsAmount)\n  };\n\n  const [state, setState] = useState<State>(Storage.read(defaultState));\n\n  useEffect(() => Storage.persist(state));\n\n  const actions = makeActionHandlers(setState, props.questions);\n\n  const selectedItem = state.questions[state.index];\n\n  return (\n    <Shell>\n      <Progress\n        questionsCount={state.questionsAmount}\n        incorrectCount={state.incorrectCount}\n        correctCount={state.correctCount}\n      />\n      <AppContainer>\n        <Header>The Road Quiz</Header>\n        <main>\n          {state.isDone ? (\n            <SummaryCard\n              color={\n                state.status === \"FAILED\" ? colors.negative : colors.positive\n              }\n            >\n              {state.status === \"FAILED\"\n                ? `Sorry, you failed ${state.incorrectCount} questions. Try again.`\n                : \"Congratulations, you passed the test!\"}\n            </SummaryCard>\n          ) : (\n            <QuestionItem\n              key={selectedItem.key}\n              onSelect={actions.onOptionSelection}\n              index={state.index + 1}\n              selected={state.selectedOption}\n              {...selectedItem.value}\n            />\n          )}\n        </main>\n        <Footer>\n          {!!state.isAnswered &&\n            (state.isDone ? (\n              <NextButton onClick={actions.onResetState}>Play again</NextButton>\n            ) : (\n              <NextButton onClick={actions.onNextQuestionClick}>\n                Next question\n              </NextButton>\n            ))}\n        </Footer>\n      </AppContainer>\n    </Shell>\n  );\n}\n","import React, { StrictMode } from \"react\";\r\nimport { render } from \"react-dom\";\r\n\r\nimport { cache as questions } from \"./db.json\";\r\nimport registerServiceWorker from \"./registerServiceWorker\";\r\n\r\nimport App from \"./App\";\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\n\r\nconst app = (\r\n  <StrictMode>\r\n    <App questions={questions} />\r\n  </StrictMode>\r\n);\r\n\r\nrender(app, rootElement);\r\n\r\nregisterServiceWorker();\r\n"],"sourceRoot":""}