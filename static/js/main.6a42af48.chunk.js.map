{"version":3,"sources":["registerServiceWorker.ts","lib/useUpdateChecker.ts","ui/theme.ts","ui/styled.ts","ui/components/core.ts","ui/compounds/QuestionItem.tsx","helpers.ts","ui/compounds/Progress.tsx","lib/StorageAdapter.ts","App.tsx","lib/hooks.ts","index.tsx"],"names":["isLocalhost","Boolean","window","location","hostname","match","register","navigator","URL","process","toString","origin","addEventListener","swUrl","fetch","then","response","status","headers","get","indexOf","serviceWorker","ready","registration","unregister","reload","registerValidSW","catch","console","log","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","error","semverGreaterThan","latestVersion","currentVersion","latestParts","split","currentParts","length","a","Number","shift","b","isNaN","fetchWithTimeout","timeout","onTimeout","Error","url","timeoutHandle","setTimeout","clearTimeout","purgeCache","caches","keys","deleteKeys","map","key","delete","Promise","all","checkForAppUpdates","fetchWithTimeoutHandler","Date","now","json","meta","version","global","appVersion","forceReload","tryInstallUpdate","tryCheckForUpdates","confirm","useUpdateChecker","interval","useEffect","intervalId","setInterval","clearInterval","colors","primary","secondary","positive","negative","neutral","light","muted","hotpink","black","white","gray","shadow","theme","radii","default","sm","md","lg","round","fontSizes","baseFontSize","shadows","top","baseUseTheme","getThemeProp","lens","props","$value","getColor","getRadius","getShadow","css","baseCSS","styled","icons","Shell","div","AppContainer","AppHeader","header","Card","SummaryCard","color","QuestionContainer","QuestionNumber","String","children","QuestionText","Image","img","ImageWrapper","Option","isAnswered","isSelected","isCorrect","Hint","HintHighlight","p","pillBackground","pillBorder","Pill","Footer","footer","ButtonIcon","NextButton","button","QuestionItem","useState","showRoundImage","setShowRoundImage","handleToggleRoundImage","useCallback","prev","handleSelection","option","selected","onSelect","correctAnswer","pillContent","answerKeys","Object","answers","index","question","onClick","alt","src","image","uri","roadCodePage","shuffle","array","temporaryValue","randomIndex","currentIndex","Math","floor","random","ProgressContainer","ProgressBar","ratio","ProgressText","Progress","answeredCount","incorrectCount","correctCount","getSampleRatio","questionsCount","n","progressRatio","ratios","x","persist","value","path","localStorage","setItem","JSON","stringify","read","defaultValue","getItem","parse","INITIAL_STATE","isDone","questions","questionsAmount","selectedOption","App","cacheKey","defaultState","Storage","setState","useCachedState","slice","actions","onNextQuestionClick","onResetState","onOptionSelection","isFailed","useActionHandlers","selectedItem","onTouchEnd","style","marginTop","rootElement","document","getElementById","app","render","registerServiceWorker"],"mappings":"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","file":"static/js/main.6a42af48.chunk.js","sourcesContent":["// tslint:disable:no-console\r\n// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the 'N+1' visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === \"localhost\" ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === \"[::1]\" ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL!,\r\n      window.location.toString()\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener(\"load\", () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            \"This web app is being served cache-first by a service \" +\r\n              \"worker. To learn more, visit https://goo.gl/SC7cgQ\"\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker) {\r\n          installingWorker.onstatechange = () => {\r\n            if (installingWorker.state === \"installed\") {\r\n              if (navigator.serviceWorker.controller) {\r\n                // At this point, the old content will have been purged and\r\n                // the fresh content will have been added to the cache.\r\n                // It's the perfect time to display a 'New content is\r\n                // available; please refresh.' message in your web app.\r\n                console.log(\"New content is available; please refresh.\");\r\n              } else {\r\n                // At this point, everything has been precached.\r\n                // It's the perfect time to display a\r\n                // 'Content is cached for offline use.' message.\r\n                console.log(\"Content is cached for offline use.\");\r\n              }\r\n            }\r\n          };\r\n        }\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error(\"Error during service worker registration:\", error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get(\"content-type\")!.indexOf(\"javascript\") === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        \"No internet connection found. App is running in offline mode.\"\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if (\"serviceWorker\" in navigator) {\r\n    navigator.serviceWorker.ready.then((registration) => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import { useEffect } from \"react\";\n\nexport function semverGreaterThan(\n  latestVersion: string,\n  currentVersion: string\n) {\n  const latestParts = latestVersion.split(/\\./g);\n  const currentParts = currentVersion.split(/\\./g);\n\n  while (latestParts.length || currentParts.length) {\n    const a = Number(latestParts.shift());\n    const b = Number(currentParts.shift());\n\n    if (a === b) {\n      continue;\n    }\n\n    return a > b || isNaN(b);\n  }\n\n  return false;\n}\n\n/**\n * Wraps fetch with a concurrent timeout-based callback\n *\n * @param {number} timeout  - timeout in milliseconds\n * @param {Function} [onTimeout] - timeout callback\n */\nexport const fetchWithTimeout = (\n  timeout: number,\n  onTimeout: () => void = () => {\n    throw new Error(\"Timeout exceeded\");\n  }\n) => async (url: string) => {\n  // this forces a 5s timeout in case the request hangs\n  const timeoutHandle = window.setTimeout(onTimeout, timeout);\n  const response = await fetch(url);\n  // cancels the timeout once the request is resolved\n  window.clearTimeout(timeoutHandle);\n  return response;\n};\n\nexport async function purgeCache() {\n  if (window.caches) {\n    const keys = await window.caches.keys();\n    const deleteKeys = keys.map(key => window.caches.delete(key));\n\n    await Promise.all(deleteKeys);\n  }\n}\n\nexport async function checkForAppUpdates() {\n  const onTimeout = () => {\n    throw new Error(\"Timout reached while fetching meta.json\");\n  };\n\n  const fetchWithTimeoutHandler = fetchWithTimeout(5000, onTimeout);\n\n  const response = await fetchWithTimeoutHandler(`meta.json?t=${Date.now()}`);\n  const meta = await response.json();\n  const latestVersion = meta.version;\n  const currentVersion = global.appVersion;\n\n  return semverGreaterThan(latestVersion, currentVersion);\n}\n\n/**\n * Forces window to reload\n */\nexport function forceReload() {\n  window.location.reload(true);\n}\n\nexport async function tryInstallUpdate() {\n  try {\n    await purgeCache();\n    window.setTimeout(forceReload, 300);\n  } catch (error) {\n    console.log(\"Failed to purge cache\", error);\n  }\n}\n\nexport async function tryCheckForUpdates() {\n  try {\n    const hasUpdates = await checkForAppUpdates();\n    if (\n      hasUpdates &&\n      window.confirm(\"A new version is available, would you like to update?\")\n    ) {\n      await tryInstallUpdate();\n    }\n  } catch (error) {\n    console.log(`Failed to check for updates:`, error);\n  }\n}\n\nconst UPDATE_CHECK_INTERVAL = 60000 * 30;\n\nexport default function useUpdateChecker(interval = UPDATE_CHECK_INTERVAL) {\n  useEffect(() => {\n    tryCheckForUpdates();\n    const intervalId = window.setInterval(tryCheckForUpdates, interval);\n\n    return () => {\n      window.clearInterval(intervalId);\n    };\n  }, [interval]);\n}\n","export const colors = {\n  primary: \"#FFD400\",\n  secondary: \"#3482B9\",\n  positive: \"#49C04A\",\n  negative: \"#D03930\",\n  neutral: \"#AAA\",\n  light: \"#ABE0F9\",\n  muted: \"#EAEAEA\",\n  hotpink: \"#FC8BA4\",\n  black: \"#333\",\n  white: \"#FFF\",\n  gray: \"#CCC\",\n  shadow: \"rgba(0, 0, 0, 0.4)\",\n} as const;\n\nexport const radii = {\n  default: \"12px\",\n  sm: \"8px\",\n  md: \"12px\",\n  lg: \"16px\",\n  round: \"9999px\",\n} as const;\n\nexport const shadows = {\n  default: `0 2px 6px ${colors.shadow}`,\n  top: `0 -2px 6px ${colors.shadow}`,\n} as const;\n\nconst baseFontSize = 18;\n\nexport const fontSizes = {\n  default: baseFontSize,\n  sm: baseFontSize * 0.8,\n  md: baseFontSize,\n  lg: baseFontSize * 1.2,\n} as const;\n\nconst theme = {\n  colors,\n  radii,\n  fontSizes,\n  shadows,\n} as const;\n\nexport type Color = keyof typeof colors;\n\nexport type Radius = keyof typeof radii;\n\nexport type FontSize = keyof typeof fontSizes;\n\nexport type Theme = typeof theme;\n\nexport default theme;\n","import styled, {\n  css as baseCSS,\n  ThemedCssFunction,\n  ThemedStyledInterface,\n  ThemeProps as BaseThemeProps,\n  // @ts-ignore (ignore while @types/styled-components isn't up to date)\n  useTheme as baseUseTheme\n} from \"styled-components\";\n\nimport { Theme } from \"ui/theme\";\n\nexport type ThemeProps = BaseThemeProps<Theme>;\n\nexport type ThemedProps<P = {}> = ThemeProps & P;\n\nexport const useTheme = baseUseTheme as () => Theme;\n\nexport const getThemeProp = <P extends keyof Theme>(key: P) => <\n  TProps extends ThemeProps = ThemeProps\n>(\n  lens: ((props: TProps) => keyof Theme[P]) | keyof Theme[P]\n) => (props: TProps) => {\n  const $value = typeof lens === \"function\" ? lens(props) : lens;\n\n  return props.theme[key][$value];\n};\n\nexport const getColor = getThemeProp(\"colors\");\nexport const getRadius = getThemeProp(\"radii\");\nexport const getFontSize = getThemeProp(\"fontSizes\");\nexport const getShadow = getThemeProp(\"shadows\");\n\nexport const css = baseCSS as ThemedCssFunction<Theme>;\nexport default styled as ThemedStyledInterface<Theme>;\n","import styled, { css, getColor, getRadius, getShadow } from \"ui/styled\";\nimport { Color } from \"ui/theme\";\n\nexport const icons = {\n  // tslint:disable-next-line:max-line-length\n  check: `50% no-repeat url(data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjIwLjM0OXB4IiBoZWlnaHQ9IjE1LjgyNnB4IiB2aWV3Qm94PSIwIDAgMjAuMzQ5IDE1LjgyNiIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAuMzQ5IDE1LjgyNiIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+IDxwb2x5Z29uIGZpbGw9IiNmZmZmZmYiIHBvaW50cz0iMTguMjI4LDAgMjAuMzQ5LDIuMTIyIDYuNjQ0LDE1LjgyNiAwLDkuMTgyIDIuMTIyLDcuMDYxIDYuNjQ0LDExLjU4MyAiLz4gPC9zdmc+)`,\n  // tslint:disable-next-line:max-line-length\n  cross: `50% no-repeat  url(data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjE1Ljg3M3B4IiBoZWlnaHQ9IjE1Ljg5MXB4IiB2aWV3Qm94PSIwIDAgMTUuODczIDE1Ljg5MSIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTUuODczIDE1Ljg5MSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+IDxwb2x5Z29uIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBmaWxsPSIjZGE0MTIxIiBwb2ludHM9IjE0LjE4NiwwIDE1Ljg3MywxLjc0IDkuNjg2LDcuOTYzIDE1LjgzOCwxNC4xNSAxNC4xNSwxNS44OTEgNy45MjgsOS43MjEgMS44MTEsMTUuODkxIDAuMDM1LDE0LjE1IDYuMTg4LDcuOTYzIDAsMS43NzUgMS43NTgsMCA3Ljk2Myw2LjI0ICIvPiA8L3N2Zz4=)`,\n};\n\nexport const Shell = styled.div`\n  display: flex;\n  background-color: ${getColor(\"light\")};\n  font-family: Lato, Arial, Helvetica, sans-serif;\n  color: ${getColor(\"black\")};\n  min-height: 100vh;\n  font-size: 18px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-image: url(\"background.svg\");\n  background-position: bottom;\n  @media screen and (max-height: 823px) {\n    font-size: 16px;\n    background-size: contain;\n  }\n  @media screen and (max-height: 700px) {\n    font-size: 15px;\n  }\n  @media screen and (max-height: 600px) {\n    font-size: 14px;\n  }\n`;\n\nexport const AppContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin: 0 auto;\n  padding-top: 1.8em;\n  max-width: 414px;\n  flex-grow: 1;\n`;\n\nexport const AppHeader = styled.header`\n  font-size: 2em;\n  text-align: center;\n  color: ${getColor(\"secondary\")};\n  font-weight: bold;\n  padding: 0.6em;\n  @media screen and (max-width: 600px) {\n    font-size: 1.5em;\n    color: ${getColor(\"white\")};\n    background-color: ${getColor(\"secondary\")};\n    padding: 0.4em;\n  }\n`;\n\ninterface CardProps {\n  color?: Color;\n}\n\nexport const Card = styled.div<CardProps>`\n  display: flex;\n  flex-direction: column;\n  min-height: 10vh;\n  margin: 1em 0;\n  padding: 0.4em;\n  border-radius: ${getRadius(\"lg\")};\n  background-color: white;\n  box-shadow: ${getShadow(\"default\")};\n  @media screen and (max-width: 600px) {\n    margin: 1em 0.8em;\n  }\n`;\n\nexport const SummaryCard = styled(Card)`\n  justify-content: center;\n  align-items: center;\n  min-height: 10vh;\n  font-weight: bold;\n  color: ${getColor(\"white\")};\n  font-size: 1.2em;\n  line-height: 1.6em;\n  background-color: ${getColor((props) => props.color ?? \"white\")};\n  text-align: center;\n`;\n\nexport const QuestionContainer = styled.div`\n  font-size: 1.2em;\n  font-weight: bold;\n  background: ${getColor(\"primary\")};\n  padding: 0.3em;\n  border-radius: ${getRadius(\"md\")};\n  display: flex;\n  justify-content: space-between;\n  color: #333;\n  margin-bottom: 0.2em;\n`;\n\nexport const QuestionNumber = styled.div`\n  background-color: ${getColor(\"white\")};\n  min-width: 1.2em;\n  min-height: 1.2em;\n  border-radius: ${getRadius(\"round\")};\n  display: inline-block;\n  text-align: center;\n  vertical-align: middle;\n  padding: ${(props) => (String(props.children).length > 1 ? \"0.2em\" : \"\")};\n  font-size: ${(props) =>\n    String(props.children).length > 1 ? \"1em\" : \"1.2em\"};\n`;\n\nexport const QuestionText = styled.div`\n  margin: 0.2em;\n  margin-right: 0.1em;\n`;\n\nexport const Image = styled.img<{ round?: boolean }>`\n  width: 8em;\n  height: 8em;\n  overflow: hidden;\n  border-radius: ${getRadius((props) => (props.round ? \"round\" : \"md\"))};\n  border: solid 0.2em ${getColor(\"white\")};\n  transition: border-radius 0.2s linear;\n`;\n\nexport const ImageWrapper = styled.div``;\n\ninterface OptionProps {\n  isSelected: boolean;\n  isAnswered: boolean;\n  isCorrect: boolean;\n}\n\nexport const Option = styled.div<OptionProps>`\n  display: ${(props) =>\n    props.isAnswered\n      ? props.isSelected || props.isCorrect\n        ? \"flex\"\n        : \"none\"\n      : \"flex\"};\n  padding: 0.6em 0.4em;\n  margin: 0.2em 0;\n  font-weight: bold;\n  align-items: center;\n  border-radius: ${getRadius(\"md\")};\n  cursor: ${(props) => (props.isAnswered ? \"\" : \"pointer\")};\n  background-color: ${getColor((props) =>\n    props.isAnswered && props.isSelected\n      ? props.isCorrect\n        ? \"positive\"\n        : \"negative\"\n      : \"muted\"\n  )};\n  color: ${getColor((props) =>\n    props.isAnswered && props.isSelected ? \"white\" : \"black\"\n  )};\n  transition: background-color 0.3s;\n  :hover {\n    background-color: ${(props) =>\n      props.isAnswered ? \"\" : props.theme.colors.gray};\n  }\n  :last-of-type {\n    margin-bottom: 0;\n  }\n`;\n\nexport const Hint = styled.div`\n  color: #666;\n  padding: 0.2em;\n`;\n\nexport const HintHighlight = styled.p`\n  color: ${getColor(\"negative\")};\n`;\n\ninterface PillProps {\n  isSelected: boolean;\n  isAnswered: boolean;\n  isCorrect: boolean;\n}\n\nconst pillBackground = css<PillProps>`\n  ${(props) =>\n    props.isAnswered && (props.isSelected || props.isCorrect)\n      ? props.isCorrect\n        ? `${props.theme.colors.positive} ${icons.check}`\n        : `${props.theme.colors.white} ${icons.cross}`\n      : props.theme.colors.primary}\n`;\n\nconst pillBorder = css<PillProps>`\n  ${(props) =>\n    props.isAnswered && (props.isSelected || props.isCorrect)\n      ? props.isCorrect\n        ? `solid 0.1em ${props.theme.colors.white}`\n        : \"none\"\n      : `solid 0.1em ${props.theme.colors.black}`}\n`;\n\nexport const Pill = styled.div<PillProps>`\n  border-radius: ${getRadius(\"round\")};\n  min-width: 2em;\n  min-height: 2em;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-right: 0.4em;\n  margin-left: 0.1em;\n  font-weight: bold;\n  padding: 0.2em;\n  background: ${pillBackground};\n  border: ${pillBorder};\n`;\n\nexport const Footer = styled.footer`\n  display: flex;\n  justify-self: flex-end;\n  align-self: flex-end;\n  width: 100%;\n  @media screen and (max-width: 600px) {\n    flex: 1;\n  }\n`;\n\nexport const ButtonIcon = styled.div`\n  position: absolute;\n  right: 0;\n  margin-right: 0.3em;\n  width: 1em;\n  height: 1em;\n  padding: 0.08em;\n  vertical-align: middle;\n  color: ${getColor(\"secondary\")};\n  background: ${getColor(\"white\")};\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  font-weight: bold;\n  font-size: 1.2em;\n`;\n\nexport const NextButton = styled.button<{ color?: Color }>`\n  background-color: ${getColor((props) => props.color ?? \"secondary\")};\n  font-size: 1.8em;\n  color: white;\n  border: none;\n  border-radius: 1em;\n  padding: 0.3em 0.6em;\n  height: 2em;\n  flex: 1;\n  transition: opacity 0.3s ease-in-out;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  outline: none;\n  user-select: none;\n  @media screen and (max-width: 600px) {\n    align-self: flex-end;\n    position: fixed;\n    width: 92%;\n    margin: 0 4%;\n    margin-top: -4%;\n    box-shadow: ${getShadow(\"default\")};\n    opacity: 0.95;\n  }\n  &:active {\n    opacity: 0.9;\n  }\n`;\n","import React, { useCallback, useState } from \"react\";\n\nimport { IQuestion } from \"types\";\nimport {\n  Card,\n  Hint,\n  HintHighlight,\n  Image,\n  ImageWrapper,\n  Option,\n  Pill,\n  QuestionContainer,\n  QuestionNumber,\n  QuestionText\n} from \"ui/components/core\";\n\ninterface Props extends IQuestion {\n  index: number;\n  selected: string | null;\n  onSelect(selectedOption: string, isCorrect: boolean): void;\n}\n\nexport default function QuestionItem(props: Props) {\n  const [showRoundImage, setShowRoundImage] = useState(true);\n\n  const handleToggleRoundImage = useCallback(\n    () => setShowRoundImage(prev => !prev),\n    []\n  );\n\n  const handleSelection = useCallback(\n    (option: string) => () => {\n      if (!!props.selected) {\n        return;\n      }\n\n      props.onSelect(option, option === props.correctAnswer);\n    },\n    [props]\n  );\n\n  const pillContent = useCallback(\n    (key: string) =>\n      !!props.selected &&\n      (key === props.selected || key === props.correctAnswer)\n        ? \"\"\n        : key,\n    [props.selected, props.correctAnswer]\n  );\n\n  const answerKeys = Object.keys(props.answers);\n\n  return (\n    <Card>\n      <QuestionContainer>\n        <QuestionText>\n          <QuestionNumber>{props.index}</QuestionNumber> {props.question}\n        </QuestionText>\n        <ImageWrapper onClick={handleToggleRoundImage}>\n          <Image\n            round={showRoundImage}\n            alt=\"question's image\"\n            src={props.image.uri}\n          />\n        </ImageWrapper>\n      </QuestionContainer>\n      {answerKeys.map((key: string) => (\n        <Option\n          key={key}\n          onClick={handleSelection(key)}\n          isAnswered={!!props.selected}\n          isCorrect={key === props.correctAnswer}\n          isSelected={key === props.selected}\n        >\n          <Pill\n            isAnswered={!!props.selected}\n            isCorrect={key === props.correctAnswer}\n            isSelected={key === props.selected}\n          >\n            {pillContent(key)}\n          </Pill>\n          <div>{props.answers[key]}</div>\n        </Option>\n      ))}\n      {!!props.selected && (\n        <Hint>\n          {props.selected !== props.correctAnswer && (\n            <HintHighlight>Correct Answer: {props.correctAnswer}</HintHighlight>\n          )}\n          {`For more information about this question refer to page ${props.roadCodePage} of the Official New Zealand Road Code.`}\n        </Hint>\n      )}\n    </Card>\n  );\n}\n","export function shuffle<T>(array: T[]) {\r\n  let currentIndex = array.length;\r\n  let temporaryValue;\r\n  let randomIndex;\r\n\r\n  // While there remain elements to shuffle...\r\n  while (0 !== currentIndex) {\r\n    // Pick a remaining element...\r\n    randomIndex = Math.floor(Math.random() * currentIndex);\r\n    currentIndex -= 1;\r\n\r\n    // And swap it with the current element.\r\n    temporaryValue = array[currentIndex];\r\n    array[currentIndex] = array[randomIndex];\r\n    array[randomIndex] = temporaryValue;\r\n  }\r\n\r\n  return array;\r\n}\r\n\r\nexport const ratio = (length: number) => (n: number) => (n / length) * 100;\r\n","import React from \"react\";\r\n\r\nimport { ratio } from \"helpers\";\r\nimport styled, { getColor, getShadow } from \"ui/styled\";\r\nimport { Color } from \"ui/theme\";\r\n\r\nconst ProgressContainer = styled.div`\r\n  display: flex;\r\n  position: fixed;\r\n  top: 0;\r\n  background-color: ${getColor(\"neutral\")};\r\n  height: 1.8em;\r\n  width: 100%;\r\n  box-shadow: ${getShadow(\"default\")};\r\n`;\r\n\r\nexport interface ProgressBarProps {\r\n  ratio: number;\r\n  color: Color;\r\n}\r\n\r\nconst ProgressBar = styled.div<ProgressBarProps>`\r\n  height: 1.8em;\r\n  background-color: ${getColor(props => props.color)};\r\n  width: ${props => props.ratio}%;\r\n  transition: 0.3s;\r\n`;\r\n\r\nconst ProgressText = styled.div`\r\n  font-size: 1em;\r\n  font-weight: bold;\r\n  text-align: right;\r\n  position: fixed;\r\n  top: 0;\r\n  right: 0.1em;\r\n  height: 1.8em;\r\n  color: white;\r\n  padding: 0.3em 0.4em;\r\n`;\r\n\r\ninterface Props {\r\n  questionsCount: number;\r\n  correctCount: number;\r\n  incorrectCount: number;\r\n}\r\n\r\nconst Progress: React.FC<Props> = (props: Props) => {\r\n  const answeredCount = props.incorrectCount + props.correctCount;\r\n\r\n  const getSampleRatio = ratio(props.questionsCount);\r\n  const progressRatio = getSampleRatio(answeredCount);\r\n  const incorrectRatio = getSampleRatio(props.incorrectCount);\r\n  const correctRatio = getSampleRatio(props.correctCount);\r\n\r\n  const ratios: ProgressBarProps[] = [\r\n    {\r\n      ratio: incorrectRatio,\r\n      color: \"negative\"\r\n    },\r\n    {\r\n      ratio: correctRatio,\r\n      color: \"positive\"\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <ProgressContainer>\r\n      {ratios.map(x => (\r\n        <ProgressBar key={x.color} {...x} />\r\n      ))}\r\n      <ProgressText>\r\n        {answeredCount} of {props.questionsCount} ({Math.round(progressRatio)}\r\n        %)\r\n        {!!props.incorrectCount &&\r\n          ` / ${props.incorrectCount} wrong answer${\r\n            props.incorrectCount > 1 ? \"s\" : \"\"\r\n          }`}\r\n      </ProgressText>\r\n    </ProgressContainer>\r\n  );\r\n};\r\n\r\nexport default Progress;\r\n","const LS_KEY = \"@THE_ROAD_QUIZ\";\r\n\r\nexport default {\r\n  persist<T extends {}>(value: T, path: string = \"\") {\r\n    const key = `${LS_KEY}${path}`;\r\n\r\n    localStorage.setItem(key, JSON.stringify(value));\r\n  },\r\n\r\n  read<T>(defaultValue: T, path: string = \"\"): T {\r\n    const key = `${LS_KEY}${path}`;\r\n    const value = localStorage.getItem(key);\r\n\r\n    return value !== null ? JSON.parse(value) : defaultValue;\r\n  }\r\n};\r\n","import React, { Dispatch, SetStateAction } from \"react\";\n\nimport { IQuestionItem } from \"types\";\n\nimport {\n  AppContainer,\n  AppHeader,\n  ButtonIcon,\n  Footer,\n  NextButton,\n  Shell,\n  SummaryCard\n} from \"ui/components\";\nimport { Progress, QuestionItem } from \"ui/compounds\";\n\nimport useUpdateChecker from \"lib/useUpdateChecker\";\nimport { shuffle } from \"helpers\";\nimport { useCachedState } from \"lib/hooks\";\n\ntype Status = \"IN_PROGRESS\" | \"PASSED\" | \"FAILED\";\n\ninterface State {\n  answeredCount: number;\n  correctCount: number;\n  incorrectCount: number;\n  isDone: boolean;\n  index: number;\n  isAnswered: boolean;\n  questions: IQuestionItem[];\n  questionsAmount: number;\n  status: Status;\n  selectedOption: string | null;\n}\n\nconst INITIAL_STATE: State = {\n  answeredCount: 0,\n  correctCount: 0,\n  incorrectCount: 0,\n  isDone: false,\n  index: 0,\n  isAnswered: false,\n  questions: [],\n  questionsAmount: 35,\n  status: \"IN_PROGRESS\",\n  selectedOption: null\n};\n\ninterface Props {\n  questions: IQuestionItem[];\n}\n\nfunction useActionHandlers(\n  setState: Dispatch<SetStateAction<State>>,\n  questions: IQuestionItem[]\n) {\n  return {\n    onNextQuestionClick() {\n      setState((state: State) =>\n        state.index < state.questionsAmount - 1\n          ? {\n              ...state,\n              index: state.index + 1,\n              isAnswered: false,\n              selectedOption: null\n            }\n          : state\n      );\n    },\n    onResetState() {\n      setState((state: State) => ({\n        ...INITIAL_STATE,\n        questionsAmount: state.questionsAmount,\n        questions: shuffle(questions).slice(0, state.questionsAmount)\n      }));\n    },\n    onOptionSelection(selectedOption: string, isCorrect: boolean) {\n      setState((state: State) => {\n        const isDone = state.index === state.questionsAmount - 1;\n        const incorrectCount = !isCorrect\n          ? state.incorrectCount + 1\n          : state.incorrectCount;\n        const correctCount = isCorrect\n          ? state.correctCount + 1\n          : state.correctCount;\n        const isFailed = incorrectCount > 3;\n\n        return {\n          ...state,\n          selectedOption,\n          answeredCount: state.answeredCount + 1,\n          correctCount,\n          incorrectCount,\n          isDone: isDone || isFailed,\n          isAnswered: true,\n          status: isFailed ? \"FAILED\" : isDone ? \"PASSED\" : \"IN_PROGRESS\"\n        };\n      });\n    }\n  };\n}\n\nexport default function App(props: Props) {\n  const defaultState = {\n    ...INITIAL_STATE,\n    questions: props.questions.slice(0, INITIAL_STATE.questionsAmount)\n  };\n\n  const [state, setState] = useCachedState<State>(\"/state\", defaultState);\n\n  // performs automatic update check\n  useUpdateChecker();\n\n  const actions = useActionHandlers(setState, props.questions);\n\n  const selectedItem = state.questions[state.index];\n\n  return (\n    <Shell>\n      <Progress\n        questionsCount={state.questionsAmount}\n        incorrectCount={state.incorrectCount}\n        correctCount={state.correctCount}\n      />\n      <AppContainer>\n        <AppHeader>NZ Road Code Quiz</AppHeader>\n        <main>\n          {state.isDone ? (\n            <SummaryCard\n              color={state.status === \"FAILED\" ? \"negative\" : \"positive\"}\n            >\n              {state.status === \"FAILED\" ? (\n                <>\n                  {`Oh no! You failed ${state.incorrectCount} questions`}.\n                  <br />\n                  Don't give up just yet, go and try again.\n                </>\n              ) : (\n                <>Awesome, you passed the test!</>\n              )}\n            </SummaryCard>\n          ) : (\n            <QuestionItem\n              key={selectedItem.key}\n              onSelect={actions.onOptionSelection}\n              index={state.index + 1}\n              selected={state.selectedOption}\n              {...selectedItem.value}\n            />\n          )}\n        </main>\n        <Footer>\n          {state.isAnswered &&\n            (state.isDone ? (\n              <NextButton\n                onClick={actions.onResetState}\n                onTouchEnd={actions.onResetState}\n                color=\"positive\"\n              >\n                Play again!\n              </NextButton>\n            ) : (\n              <NextButton\n                onClick={actions.onNextQuestionClick}\n                onTouchEnd={actions.onNextQuestionClick}\n              >\n                <span style={{ marginTop: \"-0.2em\" }}>Next question</span>\n                <ButtonIcon>\n                  <span style={{ marginTop: \"-0.2em\" }}>Â»</span>\n                </ButtonIcon>\n              </NextButton>\n            ))}\n        </Footer>\n      </AppContainer>\n    </Shell>\n  );\n}\n","import { useState, useEffect, Dispatch, SetStateAction } from \"react\";\n\nimport Storage from \"lib/StorageAdapter\";\n\nexport function useCachedState<T>(\n  cacheKey: string,\n  defaultState: T\n): [T, Dispatch<SetStateAction<T>>] {\n  const [state, setState] = useState(Storage.read(defaultState, cacheKey));\n\n  useEffect(() => {\n    Storage.persist<T>(state, cacheKey);\n  }, [state, cacheKey]);\n\n  return [state, setState];\n}\n","import React, { StrictMode } from \"react\";\r\nimport { render } from \"react-dom\";\r\nimport { ThemeProvider } from \"styled-components\";\r\n\r\nimport { cache as questions } from \"db.json\";\r\nimport registerServiceWorker from \"registerServiceWorker\";\r\n\r\nimport App from \"App\";\r\nimport theme from \"ui/theme\";\r\n\r\nimport { version } from \"../package.json\";\r\n\r\n// add appVersion to global scope\r\nglobal.appVersion = version;\r\n\r\nconst rootElement = document.getElementById(\"root\");\r\n\r\nconst app = (\r\n  <StrictMode>\r\n    <ThemeProvider theme={theme}>\r\n      <App questions={questions} />\r\n    </ThemeProvider>\r\n  </StrictMode>\r\n);\r\n\r\nrender(app, rootElement);\r\n\r\nregisterServiceWorker();\r\n"],"sourceRoot":""}